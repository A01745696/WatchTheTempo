{"ast":null,"code":"import _asyncToGenerator from\"/home/facebooker/programming/Javascript/React/watch-the-tempo-dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/facebooker/programming/Javascript/React/watch-the-tempo-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/facebooker/programming/Javascript/React/watch-the-tempo-dashboard/node_modules/@babel/runtime/regenerator/index.js\";import{useState,useEffect}from'react';import{onAuthStateChanged,signOut}from'firebase/auth';import{auth}from'./firebase-config';import DataTable from'react-data-table-component';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){//Hooks to set current user and query data\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];useEffect(function(){fetchData();});//Check if user changed and update it\nonAuthStateChanged(auth,function(currentUser){if(currentUser){setUser(currentUser);}});//Logout function\nvar logout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return signOut(auth);case 2:window.location.href='/login';case 3:case\"end\":return _context.stop();}}},_callee);}));return function logout(){return _ref.apply(this,arguments);};}();//fetch function to retrieve data from API on port 5000\nvar fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"http://127.0.0.1:5000/test/*/jugadores\").then(function(response){return response.text();}).then(function(data){//Once we get the data split it so we can process it\nvar rawData=data.slice(1,-1);rawData=rawData.split(\"},\");//Stores the data on a list\nvar prodData=[];//Map the data and reassemble it into proper format\nrawData.map(function(data){if(data[data.length-1]===\"}\"){prodData.push(JSON.parse(data));}else{prodData.push(JSON.parse(data+\"}\"));}});//Set final data on hook\nsetQuery(prodData);});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();//Defines the format for the table depending on data\nvar columns=[{name:'Usuario',selector:'usuario'},{name:'Password',selector:'password'},{name:'Fecha',selector:'fecha'}];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Login successful\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Email: \",user===null||user===void 0?void 0:user.email]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[\"UID: \",user===null||user===void 0?void 0:user.uid]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"Logout User\"}),/*#__PURE__*/_jsx(\"div\",{children:query!==undefined&&/*#__PURE__*/_jsx(DataTable,{columns:columns,data:query})})]});};export default Dashboard;","map":{"version":3,"sources":["/home/facebooker/programming/Javascript/React/watch-the-tempo-dashboard/src/pages/dashboard.js"],"names":["useState","useEffect","onAuthStateChanged","signOut","auth","DataTable","Dashboard","user","setUser","query","setQuery","fetchData","currentUser","logout","window","location","href","fetch","then","response","text","data","rawData","slice","split","prodData","map","length","push","JSON","parse","columns","name","selector","email","uid","undefined"],"mappings":"0dAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,kBAAT,CAA6BC,OAA7B,KAA4C,eAA5C,CACA,OAASC,IAAT,KAAqB,mBAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,4BAAtB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAW,CAE3B;AACA,cAAwBN,QAAQ,CAAC,EAAD,CAAhC,wCAAOO,IAAP,eAAaC,OAAb,eACA,eAA0BR,QAAQ,CAAC,EAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eAEAT,SAAS,CAAC,UAAM,CACdU,SAAS,GACV,CAFQ,CAAT,CAIA;AACAT,kBAAkB,CAACE,IAAD,CAAO,SAACQ,WAAD,CAAiB,CACtC,GAAGA,WAAH,CAAgB,CACdJ,OAAO,CAACI,WAAD,CAAP,CACD,CACJ,CAJiB,CAAlB,CAMA;AACA,GAAMC,CAAAA,MAAM,0FAAG,yJACPV,CAAAA,OAAO,CAACC,IAAD,CADA,QAEbU,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,QAArB,CAFa,sDAAH,kBAANH,CAAAA,MAAM,0CAAZ,CAKA;AACA,GAAMF,CAAAA,SAAS,2FAAG,wIACdM,KAAK,CAAC,wCAAD,CAAL,CAAgDC,IAAhD,CAAqD,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAArD,EAAoFF,IAApF,CAAyF,SAACG,IAAD,CAAU,CACjG;AACA,GAAIC,CAAAA,OAAO,CAAGD,IAAI,CAACE,KAAL,CAAW,CAAX,CAAc,CAAC,CAAf,CAAd,CACAD,OAAO,CAAGA,OAAO,CAACE,KAAR,CAAc,IAAd,CAAV,CAEA;AACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CAEA;AACAH,OAAO,CAACI,GAAR,CAAY,SAACL,IAAD,CAAU,CACpB,GAAGA,IAAI,CAACA,IAAI,CAACM,MAAL,CAAY,CAAb,CAAJ,GAAwB,GAA3B,CAAgC,CAC9BF,QAAQ,CAACG,IAAT,CAAcC,IAAI,CAACC,KAAL,CAAWT,IAAX,CAAd,EACD,CAFD,IAGK,CACHI,QAAQ,CAACG,IAAT,CAAcC,IAAI,CAACC,KAAL,CAAWT,IAAI,CAAC,GAAhB,CAAd,EACD,CACF,CAPD,EAQA;AACAX,QAAQ,CAACe,QAAD,CAAR,CACD,CAnBD,EADc,wDAAH,kBAATd,CAAAA,SAAS,2CAAf,CAuBA;AACA,GAAMoB,CAAAA,OAAO,CAAG,CACZ,CACIC,IAAI,CAAE,SADV,CAEIC,QAAQ,CAAE,SAFd,CADY,CAKZ,CACID,IAAI,CAAE,UADV,CAEIC,QAAQ,CAAE,UAFd,CALY,CASZ,CACID,IAAI,CAAE,OADV,CAEIC,QAAQ,CAAE,OAFd,CATY,CAAhB,CAeA,mBACI,oCACI,0CADJ,cACiC,aADjC,cACsC,aADtC,cAEI,kCAAc1B,IAAd,SAAcA,IAAd,iBAAcA,IAAI,CAAE2B,KAApB,GAFJ,cAEqC,aAFrC,cAE0C,aAF1C,cAGI,gCAAY3B,IAAZ,SAAYA,IAAZ,iBAAYA,IAAI,CAAE4B,GAAlB,GAHJ,cAGiC,aAHjC,cAGsC,aAHtC,cAII,eAAQ,OAAO,CAAEtB,MAAjB,yBAJJ,cAKI,qBACGJ,KAAK,GAAK2B,SAAV,eACC,KAAC,SAAD,EAAW,OAAO,CAAEL,OAApB,CAA6B,IAAI,CAAEtB,KAAnC,EAFJ,EALJ,GADJ,CAaD,CA5ED,CA8EA,cAAeH,CAAAA,SAAf","sourcesContent":["import { useState, useEffect } from 'react';\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\nimport { auth } from './firebase-config';\nimport DataTable from 'react-data-table-component';\n\nconst Dashboard = function() {\n\n  //Hooks to set current user and query data\n  const [user, setUser] = useState({});\n  const [query, setQuery] = useState([]);\n\n  useEffect(() => {\n    fetchData();\n  });\n\n  //Check if user changed and update it\n  onAuthStateChanged(auth, (currentUser) => {\n      if(currentUser) {\n        setUser(currentUser);\n      }\n  });\n\n  //Logout function\n  const logout = async () => {\n    await signOut(auth);\n    window.location.href='/login';\n  };\n\n  //fetch function to retrieve data from API on port 5000\n  const fetchData = async () => {\n      fetch(\"http://127.0.0.1:5000/test/*/jugadores\").then((response) => response.text()).then((data) => {\n        //Once we get the data split it so we can process it\n        var rawData = data.slice(1, -1);\n        rawData = rawData.split(\"},\");\n\n        //Stores the data on a list\n        var prodData = [];\n\n        //Map the data and reassemble it into proper format\n        rawData.map((data) => {\n          if(data[data.length-1] === \"}\") {\n            prodData.push(JSON.parse(data));\n          }\n          else {\n            prodData.push(JSON.parse(data+\"}\"));\n          }\n        });\n        //Set final data on hook\n        setQuery(prodData);\n      });\n    };\n\n  //Defines the format for the table depending on data\n  const columns = [\n      {\n          name: 'Usuario',\n          selector: 'usuario'\n      },\n      {\n          name: 'Password',\n          selector: 'password'\n      },\n      {\n          name: 'Fecha',\n          selector: 'fecha'\n      },\n  ];\n\n  return (\n      <div>\n          <span>Login successful</span><br/><br/>\n          <span>Email: {user?.email}</span><br/><br/>\n          <span>UID: {user?.uid}</span><br/><br/>\n          <button onClick={logout}>Logout User</button>\n          <div>\n            {query !== undefined &&\n              <DataTable columns={columns} data={query}/>\n            }\n          </div>\n      </div>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}